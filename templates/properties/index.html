{% extends 'properties/base.html' %}
{% include "properties/properties/partials/property_card.html" with property=property %}

{% load static %}
{% block title %}
  Home - Real Estate
{% endblock %}
{% block style %}


  <link href="{% static 'properties/main_css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'properties/main_css/bootstrap-icons.min.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'properties/main_css/style.css' %}" />
{% endblock %}


{% block body %}
 <!-- Announcement Bar -->
<div class="announcement-bar">
  <div class="scrolling-wrapper">
    <div class="scrolling-text">
      üè° Welcome to Real Estate Properties ‚Äì Find your dream home today!
    </div>
    <div class="scrolling-text">
      Buy, Sell & Rent Properties Easily | Trusted Real Estate Platform | Explore Now üöÄ
    </div>
    <div class="scrolling-text">
     Check our latest listings in your city.
    </div>
  </div>
</div>


<div class="hero">
    <!-- Floating Search Box -->
    <div class="search-box">
      <!-- Tabs -->
      

      <form class="form" method="get" action="{% url 'search_properties' %}">
    {% csrf_token %}
    <input type="hidden" id="dealTypeField" name="deal_type" value="sale">

    <div class="tabs">
        <button type="button" class="active" data-type="sale" onclick="switchTab('sale', this)">Buy</button>
        <button type="button" data-type="rent" onclick="switchTab('rent', this)">Rent</button>
         </div>

  <div class="form-row main-search mb-2 position-relative" style="display: flex; align-items: center; gap: 8px;">
  <div style="position: relative; flex: 1;">
    {% comment %} <input 
      type="text" 
      id="searchInput" 
      name="location" 
      placeholder="Search by City or Locality"
      autocomplete="off"
      style="width: 100%; padding: 8px 10px; border: 1px solid #ccc; border-radius: 4px;"
    >

    <!-- Suggestion box -->
    <ul 
      id="citySuggestions" 
      class="list-group position-absolute w-100" 
      style="z-index:1000; top:100%; left:0; margin-top:2px; display:none; max-height:200px; overflow-y:auto;"
    ></ul> {% endcomment %}
    <input 
      type="text" 
      id="searchInput" 
      name="location" 
      placeholder="Search by City or Locality"
      autocomplete="off"
      style="width: 100%; padding: 8px 10px; border: 1px solid #ccc; border-radius:4px;"
    >
    <ul 
      id="citySuggestions" 
      class="list-group position-absolute w-100" 
      style="z-index:1000; top:100%; left:0; margin-top:2px; display:none; max-height:200px; overflow-y:auto;"
    ></ul>
  </div>

  <button type="submit" style="padding: 8px 16px; border:none; background:#007bff; color:#fff; border-radius:4px;">
    Search
  </button>
</div>


    <!-- Common Filters (Used by All Tabs) -->
    <div id="common-fields" class="form-section">

        <!-- Property Type Select (Will change options dynamically by JS) -->
        <select name="property_type" id="propertyTypeSelect">
            <!-- Buy (Default) -->
            <option value="">Property Type</option>
            <option value="flat">Flat</option>
            <option value="house">House</option>
            <option value="land">Land</option>
            <option value="commercial">Commercial</option>
        </select>

        <!-- BHK (Only visible for Buy & Rent) -->
        <select name="bhk" id="bhkSelect">
            <option value="">BHK Type</option>
            <option value="1bhk">1 BHK</option>
            <option value="2bhk">2 BHK</option>
            <option value="3bhk">3 BHK</option>
            <option value="4bhk+">4 BHK+</option>
        </select>

        <!-- Commercial Purpose (Only visible in Commercial Tab) -->
        <select name="commercial_purpose" id="commercialPurposeSelect" class="hidden">
            <option value="">Purpose</option>
            <option value="rent">Rent</option>
            <option value="sale">Buy</option>
        </select>
    </div>
</form>



</div>
</div>

<!--property listing start here-->

<div class="container mt-5">
  <!-- Recently Added -->
  <div class="property-section">  
      <h4 class="section-title">Recently Added Properties</h4>
       <span class="section-subtitle">Curated especially for you</span>
       {% include "properties/partials/property_card.html" with properties=recent_property carousel_id="recentCarousel" %}
  </div>


  <!-- Properties for Rent -->
  <div class="property-section">
    <h4 class="section-title">Properties for Rent</h4>
    {% include "properties/partials/property_card.html" with properties=rent_property carousel_id="rentCarousel" %}
  </div>

  <!-- Properties for Sale -->
  <div class="property-section">
    <h4 class="section-title">Properties for Sale</h4>
    <span class="section-subtitle">Find Your Dream Home</span>
    {% include "properties/partials/property_card.html" with properties=sale_properties carousel_id="saleCarousel" %}
  </div>

</div>





<!--end here property-->
  
 <!-- about here -->

  <div class="container my-5" id="aboutSection">
  <div class="row align-items-center">
    <!-- Left Image -->
    <div class="col-md-6">
      <div class="img-wrapper">
        <img src="{% static 'properties/images/about1.jpg' %}"
             alt="About us"
             class="img-fluid rounded shadow-sm w-100 about-img" 
             id="aboutImage" />
      </div>
    </div>

    <!-- Right Content -->
    <div class="col-md-6 ps-md-5 mt-4 mt-md-0 about-content">
      <h5 class="text-uppercase text-dark mb-2 fw-bold">About Us</h5>

      <!-- IMPORTANT: keep original text in data-original attribute -->
      <h2 id="aboutHeading" data-original="Considering finding your dream home?" class="fw-bold mb-3"></h2>

      <p id="aboutText" class="text-muted mb-4">
        Launched in 2018, realestate.com, India‚Äôs No. 1 property portal,
        connects buyers, sellers, and brokers for quick and affordable real estate solutions.
      </p>

      <a href="{% url 'about' %}" class="btn btn-primary px-4 py-2 rounded-pill shadow-sm about-btn">
        Read More
      </a>
    </div>
  </div>
</div>

<!--about end here-->
<!--getting property via bhk-->
<div class="bhk-section">
  <h2>BHK choice in mind?</h2>
  <p class="text-center p-0">Browse by no. of bedrooms in the house</p>
  <div class="card-container">

    <a href="{% url 'bhk_search' %}?bhk=1bhk" class="bhk-card">
      <img src="{% static 'properties/images/house.png' %}" alt="House">
      <h3>1 BHK</h3>
      <p>{{ count_1bhk }} Properties</p>
    </a>

    <a href="{% url 'bhk_search' %}?bhk=2bhk" class="bhk-card">
      <img src="{% static 'properties/images/house.png' %}" alt="House">
      <h3>2 BHK</h3>
      <p>{{ count_2bhk }} Properties</p>
    </a>

    <a href="{% url 'bhk_search' %}?bhk=3bhk" class="bhk-card">
      <img src="{% static 'properties/images/house.png' %}" alt="House">
      <h3>3 BHK</h3>
      <p>{{ count_3bhk }} Properties</p>
    </a>

    <a href="{% url 'bhk_search' %}?bhk=4bhk+" class="bhk-card">
      <img src="{% static 'properties/images/house.png' %}" alt="House">
      <h3>4 BHK+</h3>
      <p>{{ count_4bhk }} Properties</p>
    </a>

  </div>
</div>



<!-- Hero Section -->
    <section class="main-hero-container">
    <div class="main-hero">
        <h1 class="main-hero-title">Real Estate Tools</h1>
        <p class="main-hero-subtitle">Calculate EMI, Check Loan Eligibility, Budget, and more‚Äîall in one place!</p>
    </div>
</section>


    <!-- Overlapping Cards -->
    <section class="tools-container">
      <a href="{% url 'emi_calc' %}" class="text-decoration-none">
        <div class="tool-box">
    <h3 class="tool-box-title">EMI Calculator</h3>
    <p class="tool-box-text text-muted">Calculate your monthly EMI and total payable amount easily.</p></a>
    
</div>

        <a href="{% url 'loan_eligibility' %}" class="text-decoration-none">
        <div class="tool-box">
            <h3 class="tool-box-title">Loan Eligibility</h3>
            <p class="tool-box-text">Find out how much loan you are eligible for based on your income.</p>
           
        </div>
        </a>
        <a href="{% url 'budget_calc' %}" class="text-decoration-none"> 
        <div class="tool-box">
            <h3 class="tool-box-title">Budget Calculator</h3>
            <p class="tool-box-text">Plan your home purchase based on your income and expenses.</p>
           
        </div>
      </a>
        <a href="{% url 'area_calc' %}" class="text-decoration-none"> 
        <div class="tool-box">
            <h3 class="tool-box-title">Area Converter</h3>
            <p class="tool-box-text">Convert land areas between square feet, acres, cent, and more.</p>
           
        </div>
      </a>
    </section>



    <!--tool section end here -->

 


<div class="re-hero-section py-5">
  <div class="container">
    <div class="row re-hero-row align-items-center text-center text-md-start">
      
      <!-- Left Content -->
      <div class="col-md-7 re-hero-left mb-4 mb-md-0">
        <h1 class="re-hero-title mb-3">Sell or Rent Faster at the Right Price!</h1>
        <p class="re-hero-subtitle mb-4">Your perfect buyer is waiting. List your property now and reach thousands instantly.</p>
         {% if request.user.is_authenticated %}
        <a href="{% url 'post_property' %}">
      <button type="button" id="postPropertyBtn" class="btn btn-primary btn-sm">Post Property It's Free</button>
    </a>
  {% else %}
    <button type="button" class="btn btn-primary btn-sm" id="postPropertyBtn">Post Property It's Free

    </button>
  {% endif %}

      </div>

      <!-- Right Share -->
      <div class="col-md-5 re-hero-right d-flex flex-column align-items-center align-items-md-start">
        <p class="mb-2 re-share-label">Share this page:</p>
        <a href="https://wa.me/?text=Check%20this%20property:%20{{ request.build_absolute_uri }}" 
           target="_blank" 
           class="btn re-btn-whatsapp d-flex align-items-center gap-2">
           <i class="bi bi-whatsapp re-whatsapp-icon fs-4"></i>
           <span>WhatsApp</span>
        </a>
      </div>

    </div>
  </div>
</div>


  <!-- our servise here -->

  <section class="services-section" 
         style="background: url('{% static "properties/images/s2.jpg" %}') no-repeat center center/cover; padding: 40px 0;">
  <div class="container">

    <!-- Heading -->
    <h2 class="fw-bold mb-4 text-center text-dark">Explore Our Services</h2>
    <div class="container bg-white mt-0 ">
    <div class="row g-3">

      <!-- Service 1 -->
      <div class="col-6 col-md-4 text-black">
        <a href="#" class="text-decoration-none text-dark service-trigger"
        data-bs-toggle="modal"
        data-bs-target="#serviceModal"
        data-title="Buy a Home"

        data-deal="sale">
        <div class=" service-card d-flex justify-content-between align-items-center p-3 bg-white rounded shadow-sm h-100">
          <div>
            <h6 class="fw-bold mb-1">Buy a Home</h6>
            <p class="text-muted small mb-0">Flats, villas & more</p>
          </div>
          <img src="{% static 'properties/images/sale1.jpg' %}" width="80"  height="70" alt="Buy">
        </div>
        </a>
      </div>

      <!-- Service 2 -->
      <div class="col-6 col-md-4 text-dark">
        <a href="#" class="text-decoration-none text-dark service-trigger"
        data-bs-toggle="modal"
        data-bs-target="#serviceModal"
        data-title="Rent a Home"
        data-deal="rent">
        <div class=" service-card d-flex justify-content-between align-items-center p-3 bg-white rounded shadow-sm h-100">
          <div>
            <h6 class="fw-bold mb-1">Rent a Home</h6>
            <p class="text-muted small mb-0">Apartments & villas</p>
          </div>
          <img src="{% static 'properties/images/m21.jpg' %}" width="80"  height="70" height = "80" alt="Rent">
        </div>
        </a>
      </div>

      <!-- Service 3 -->
      <div class="col-6 col-md-4 text-dark">
        <a href="#" class="text-decoration-none text-dark service-trigger"
        data-bs-toggle="modal"
        data-bs-target="#serviceModal"
        data-title="Commercial Properties"
        data-deal="commercial">
        <div class=" service-card d-flex justify-content-between align-items-center p-3 bg-white rounded shadow-sm h-100">
          <div>
            <h6 class="fw-bold mb-1">Commercial</h6>
            <p class="text-muted small mb-0">Shops & offices</p>
          </div>
          <img src="{% static 'properties/images/service.jpg' %}" width="80"  height="70" alt="Commercial">
        </div>
        </a>
      </div>

      <!-- Service 4 -->
      <div class="col-6 col-md-4 text-dark">
        <a href="#" class="text-decoration-none text-dark service-trigger"
       data-bs-toggle="modal"
       data-bs-target="#serviceModal"
       data-title="Plots & Land"
       data-deal="land">
        <div class=" service-card d-flex justify-content-between align-items-center p-3 bg-white rounded shadow-sm h-100">
          <div>
            <h6 class="fw-bold mb-1">Plots & Land</h6>
            <p class="text-muted small mb-0">Residential & more</p>
          </div>
          <img src="{% static 'properties/images/admin.jpg' %}" width="80"  height="70" alt="Land">
        </div>
        </a>
      </div>

      <!-- Service 5 -->
      <div class="col-6 col-md-4 text-dark">
        <a href="#" class="text-decoration-none text-dark service-trigger"
        data-bs-toggle="modal"
        data-bs-target="#serviceModal"
        data-title="PG & Co-Living"
        data-deal="pg">
        <div class=" service-card d-flex justify-content-between align-items-center p-3 bg-white rounded shadow-sm h-100">
          <div>
            <h6 class="fw-bold mb-1">PG & Co-Living</h6>
            <p class="text-muted small mb-0">Affordable rentals</p>
          </div>
          <img src="{% static 'properties/images/service.jpg' %}" width="80"  height="70" alt="PG">
        </div>
      </a>
      </div>

      <!-- Service 6 -->    

      <div class="col-6 col-md-4 text-dark">
        <a href="{% url "post_property" %}" class="text-decoration-none">
        <div class=" service-card d-flex justify-content-between align-items-center p-3 bg-white rounded shadow-sm h-100">
          
          <div>
            <h6 class="fw-bold mb-1">List Property</h6>
            <p class="text-muted small mb-0">Post & sell easily</p>
          </div>
          <img src="{% static 'properties/images/service.jpg' %}" width="80"  height="70" alt="List Property">
          
        </div>
        </a>
      </div>
    
    </div> <!-- row -->
    </div>
  </div>
</section>


<!--explore city page -->
<div class="container my-5">
  <h4 class="fw-bold mb-4">Explore Smart Estate in Top Cities</h4>
  <div class="city-carousel-wrapper position-relative">

   <!-- Left Arrow -->
  

    <!-- Scrollable Cities -->
    <div class="city-carousel d-flex overflow-auto">
      {% for city in cities %}
        <div class="col-6 col-sm-4 col-md-3 col-lg-2 text-center">
          <div class="city-card" data-city-name="{{ city.name }}" data-bs-toggle="modal" data-bs-target="#searchModal">
            {% if city.image %}
              <img src="{{ city.image.url }}" class="rounded-circle city-img mb-2" alt="{{ city.name }}" style="width:100px;height:100px;object-fit:cover;">
            {% else %}
              <img src="{% static 'properties/images/admin.jpg' %}" class="rounded-circle city-img mb-2" alt="{{ city.name }}" style="width:100px;height:100px;object-fit:cover;">
            {% endif %}
            <h6 class="fw-semibold">{{ city.name }}</h6>
            <small class="text-muted">{{ city.property_count }}+ Properties</small>
          </div>
        </div>
      {% endfor %}
    </div>

   <!-- Arrows -->
        <button class="carousel-control-prev custom-arrow" type="button" data-bs-target="#{{ carousel_id }}" data-bs-slide="prev">
          <i class="bi bi-chevron-left"></i>
        </button>
        <button class="carousel-control-next custom-arrow" type="button" data-bs-target="#{{ carousel_id }}" data-bs-slide="next">
          <i class="bi bi-chevron-right"></i>
        </button>
  </div>
</div>



<!--explore city end gere-->
<!--testimonial start here-->
{% load static %}
<div class="container py-5 testimonial-section">
  <h2 class="text-center mb-4">What Our Clients Say</h2>

  <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for review in latest_reviews %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <div class="card mx-auto">

          <!-- Profile + Name + Rating -->
          <div class="d-flex align-items-center">
            {% if review.profile_image %}
              <img src="{{ review.profile_image.url }}" alt="{{ review.name }} Profile">
            {% else %}
              <img src="{% static 'default-profile.png' %}" alt="Default Profile">
            {% endif %}
            <div>
              <h6>{{ review.name }}</h6>
              <div class="text-warning">
                {% for i in "12345" %}
                  {% if forloop.counter <= review.rating %}
                    ‚òÖ
                  {% else %}
                    ‚òÜ
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>

          <!-- Review Text -->
          <p>{{ review.review|truncatewords:25 }}</p>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Carousel Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
      </svg>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
      </svg>
    </button>
  </div>

  <!-- See More Button -->
  <div class="text-center mt-4">
    <a href="{% url 'testimonials' %}" class="btn testimonial">See More Reviews</a>
  </div>
</div>

<!--end here testimonial-->
{% comment %} <!-- Auth Modal -->
<!-- Auth Modal -->
<div class="modal fade" id="authModalNamespace" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content auth-modal-content">

      <!-- Modal Header -->
      <div class="auth-modal-header">
        <h5 class="auth-modal-title" id="authModalLabelNamespace">Login</h5>
        <button type="button" class="btn-close auth-modal-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal Body -->
      <div class="auth-modal-body">
        <div class="auth-forms-container">

          <!-- Login Form -->
          <div id="authLoginForm" class="auth-form">
            <form method="POST" action="{% url 'user_login' %}">
              {% csrf_token %}
              <div class="auth-form-group">
                <i class="bi bi-envelope auth-input-icon"></i>
                <input type="text" class="auth-input" name="identifier" placeholder="Email or Mobile" required>
              </div>
              <div class="auth-form-group">
                <i class="bi bi-lock auth-input-icon"></i>
                <input type="password" class="auth-input" name="password" placeholder="Password" required>
              </div>
              <button type="submit" class="auth-btn auth-btn-login">Login</button>
              <button type="button" id="otpLoginBtn" class="auth-btn auth-btn-otp mt-2">Login with OTP</button>
            </form>
            <p class="auth-form-switch">
              Don‚Äôt have an account? 
              <a href="#" id="authShowSignup" class="auth-switch-link">Sign Up</a>
            </p>
            <p class="auth-form-switch">
              <a href="#" id="authShowForgotPassword">Forgot Password?</a>

            </p>
          </div>

          <!-- Signup Form -->
          <div id="authSignupForm" class="auth-form" style="display:none;">
            <form method="POST" action="{% url 'user_signup' %}">
              {% csrf_token %}
              <div class="auth-form-group">
                <i class="bi bi-person auth-input-icon"></i>
                <input type="text" class="auth-input" name="full_name" placeholder="Full Name" required>
              </div>
              <div class="auth-form-group">
                <i class="bi bi-envelope auth-input-icon"></i>
                <input type="email" class="auth-input" name="email" placeholder="Email" required>
              </div>
              <div class="auth-form-group">
                <i class="bi bi-telephone auth-input-icon"></i>
                <input type="text" class="auth-input" name="phone" placeholder="Mobile" required>
              </div>
              <div class="auth-form-group">
                <i class="bi bi-lock auth-input-icon"></i>
                <input type="password" class="auth-input" name="password1" placeholder="Password" required>
              </div>
              <div class="auth-form-group">
                <i class="bi bi-lock-fill auth-input-icon"></i>
                <input type="password" class="auth-input" name="password2" placeholder="Confirm Password" required>
              </div>
              <button type="submit" class="auth-btn auth-btn-signup">Sign Up</button>
            </form>
            <p class="auth-form-switch">
              Already have an account? 
              <a href="#" id="authShowLogin" class="auth-switch-link">Login</a>
            </p>
          </div>

<!-- OTP Login Form -->
<div id="authOtpForm" class="auth-form" style="display:none;">
  <form id="otpSendForm">
      {% csrf_token %}
      <div class="auth-form-group">
          <i class="bi bi-envelope auth-input-icon"></i>
          <input type="text" class="auth-input" name="identifier" placeholder="Email or Mobile" required>
      </div>
      <button type="submit" class="auth-btn auth-btn-otp">Send OTP</button>
  </form>

  <form id="otpVerifyForm" style="display:none;">
      {% csrf_token %}
      <input type="hidden" name="identifier" id="otpIdentifier">
      <div class="auth-form-group">
          <i class="bi bi-key auth-input-icon"></i>
          <input type="text" class="auth-input" name="otp" placeholder="Enter OTP" required>
      </div>
      <button type="submit" class="auth-btn auth-btn-otp-verify">Verify OTP</button>
  </form>
</div>
<!-- Forgot Password Form -->
<div id="authForgotPasswordForm" class="auth-form" style="display:none;">
  <!-- Step 1: Enter email -->
  <form id="forgotPasswordSendForm">
      {% csrf_token %}
      <div class="auth-form-group">
          <i class="bi bi-envelope auth-input-icon"></i>
          <input type="email" class="auth-input" name="identifier" placeholder="Enter your email" required>
      </div>
      <button type="submit" class="auth-btn">Send OTP</button>
  </form>

  <!-- Step 2: Verify OTP and Reset Password -->
  <form id="forgotPasswordVerifyForm" style="display:none;">
      {% csrf_token %}
      <input type="hidden" id="resetOtpIdentifier">
      <div class="auth-form-group">
          <i class="bi bi-key auth-input-icon"></i>
          <input type="text" class="auth-input" name="otp" placeholder="Enter OTP" required>
      </div>
      <div class="auth-form-group">
          <i class="bi bi-lock auth-input-icon"></i>
          <input type="password" class="auth-input" name="new_password" placeholder="New Password" required>
      </div>
      <button type="submit" class="auth-btn">Reset Password</button>
  </form>

  <p class="auth-form-switch">
      <a href="#" id="authShowLoginFromForgot" class="auth-switch-link">Back to Login</a>
  </p>
</div>

        </div>
      </div>
    </div>
  </div>
</div> {% endcomment %}

{% comment %} modal services {% endcomment %}
<div class="modal fade" id="serviceModal" tabindex="-1" aria-labelledby="serviceModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="serviceModalLabel">Explore Properties</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form method="get" action="{% url 'search_properties' %}">
          {% csrf_token %}
          <!-- Hidden field for deal_type -->
  <input type="hidden" id="dealTypeInput" name="deal_type" value="sale">
          <!-- hidden field (deal_type like buy/rent/pg/commercial/list/land) -->
          <label class="form-label">City / Location</label>
    <input type="text" id="locationInput" class="form-control" name="location" placeholder="e.g. Ahmedabad, Metoda" autocomplete="off">
    <ul id="locationSuggestions" class="list-group position-absolute w-100" style="z-index:1000; top:100%; left:0; display:none; max-height:200px; overflow-y:auto;"></ul>
</div>





          <!-- Property Type -->
          <div class="mb-3">
            <label class="form-label">Property Type</label>
            <select class="form-select" name="property_type">
              <option value="">Any</option>
              <option value="flat">Flat</option>
              <option value="villa">Villa</option>
              <option value="apartment">Apartment</option>
              <option value="land">Plot / Land</option>
              <option value="commercial">Commercial</option>
              
            </select>
          </div>

          <!-- BHK -->
          <div class="mb-3">
            <label class="form-label">BHK</label>
            <select class="form-select" name="bhk">
              <option value="">Any</option>
              <option value="1bhk">1 BHK</option>
              <option value="2bhk">2 BHK</option>
              <option value="3bhk">3 BHK</option>
              <option value="4bhk+">4+ BHK</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary w-100">Search</button>
        </form>
      </div>

    </div>
  </div>
</div>





{% comment %} modal for Explore city {% endcomment %}
<!-- Modal Search -->
<!-- Explore City Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-3">
      <div class="modal-header">
        <h5 class="modal-title">Search in <span id="modalCityName"></span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form method="get" action="{% url 'properties_search' %}" id="modalSearchForm">
          {% csrf_token %}

          <!-- Hidden field for deal type -->
          <input type="hidden" id="modalDealType" name="deal_type" value="sale">

          <!-- Hidden field for city -->
          <input type="hidden" name="location" id="modalCityInput">

          <!-- Tabs -->
          <div class="tabs mb-3">
            <button type="button" class="active" data-type="sale" onclick="switchModalTab('sale', this)">Buy</button>
            <button type="button" data-type="rent" onclick="switchModalTab('rent', this)">Rent</button>
            <button type="button" data-type="commercial" onclick="switchModalTab('commercial', this)">Commercial</button>
          </div>

          <!-- Filters -->
          <select name="property_type" id="modalPropertyTypeSelect" class="form-select mb-2">
            <option value="">Property Type</option>
          </select>

          <select name="bhk" id="modalBhkSelect" class="form-select mb-2">
            <option value="">BHK Type</option>
            <option value="1bhk">1 BHK</option>
            <option value="2bhk">2 BHK</option>
            <option value="3bhk">3 BHK</option>
            <option value="4bhk+">4 BHK+</option>
          </select>

          <select name="commercial_purpose" id="modalCommercialPurposeSelect" class="form-select mb-2 hidden">
            <option value="">Purpose</option>
            <option value="buy">office</option>
            <option value="rent">Rent</option>
          </select>

          <button type="submit" class="btn btn-success w-100">Search</button>
        </form>
      </div>
    </div>
  </div>
</div>



<div id="toastMessage" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
  <div class="toast-header">
    <strong class="me-auto">Notification</strong>
    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">
    <!-- JS will insert message here -->
  </div>
</div>







{% endblock %}


{% block js %}

 {{ block.super }}
 
  
  <script src="{% static 'properties/main_js/emi.js' %}"></script>
   
  <script>
  const toggleShortlistUrl = "{% url 'toggle_shortlist' %}";
  {% comment %} const csrfToken = "{{ csrf_token }}"; {% endcomment %}
</script>
  
  {% comment %} <script>
    const urls = {
        sendOtp: "{% url 'send_login_otp' %}",
        verifyOtp: "{% url 'verify_login_otp' %}"
    };
 
</script>
 <script src="{% static 'properties/main_js/auth.js' %}"></script> {% endcomment %}


  


  

{% endblock %}
