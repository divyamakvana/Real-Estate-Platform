{% extends 'properties/base.html' %}

{% block title %}My Notifications{% endblock %}

{% block body %}
<div class="container mt-5">
    <h2 class="mb-4">My Notifications</h2>

    <div class="card shadow-sm">
        <ul class="list-group list-group-flush" style="max-height: 500px; overflow-y: auto;">
            {% for notif in notifications %}
                <li class="list-group-item d-flex justify-content-between align-items-center py-2 {% if not notif.read %}bg-light fw-bold{% endif %}">
                    <div class="small-text">
                        {{ notif.message|truncatechars:80 }}
                        <br>
                        <small class="text-muted">{{ notif.created_at|timesince }} ago</small>
                    </div>
                    {% if not notif.read %}
                        <a href="{% url 'mark_notification_read' notif.id %}" class="btn btn-sm btn-outline-primary">Mark read</a>
                    {% endif %}
                </li>
            {% empty %}
                <li class="list-group-item text-center text-muted py-3">No notifications found.</li>
            {% endfor %}
        </ul>
    </div>
</div>

<style>
/* Make notifications more compact */
.list-group-item {
    font-size: 0.9rem;
    line-height: 1.2rem;
    padding: 0.5rem 1rem;
}
.list-group-item .small-text small {
    font-size: 0.75rem;
    color: #6c757d;
}
.card {
    border-radius: 0.5rem;
}
</style>
{% endblock %}
